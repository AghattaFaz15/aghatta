<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Intima√ß√£o Celestial - Aghatta XV</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Great+Vibes&family=Indie+Flower&display=swap');

  * {
    margin: 0; padding: 0; box-sizing: border-box;
  }
  html, body {
    height: 100%;
    background: white; /* puro e celestial */
    font-family: Georgia, serif;
    overflow: hidden;
    color: black; /* default */
  }
  .tela {
    position: fixed;
    inset: 0;
    display: flex;
    flex-direction: column;
    user-select: none;
    transition: opacity 0.6s ease;
    justify-content: center;
    align-items: center;
    padding: 0 1em;
  }
  .oculto {
    opacity: 0;
    pointer-events: none;
  }

  /* Tela 1 - Rolo fechado, mais centralizado */
  #tela1 {
    background: white url('rolofechado.png') no-repeat center center;
    background-size: contain;
    cursor: pointer;
    font-size: 2.5em;
    text-shadow: 0 0 10px gold;
    color: gold;
    flex-direction: column;
    justify-content: center;
  }
  #tela1 span {
    margin-top: 70vh; /* mais para cima */
    display: block;
    text-align: center;
    font-weight: bold;
  }

  /* Tela 2 - Rolo aberto com texto manuscrito preto */
  #tela2 {
    background: url('roloaberto.png') no-repeat center center;
    background-size: contain;
    padding: 1.2em 2em 2em;
    flex-direction: column;
    overflow: hidden;
    color: black;
    font-family: 'Indie Flower', cursive; /* manuscrito leve e belo */
    user-select: text;
    text-shadow: none;
  }
  #textoConvite {
    overflow-y: auto;
    max-height: 48vh; /* scroll menor para caber no pergaminho */
    font-size: 1.4em;
    line-height: 1.6em;
    padding-right: 1em;
    outline: none;
    background: transparent;
    color: black;
  }
  #botaoAvancar {
    margin-top: 1em;
    background: gold;
    color: black;
    border: none;
    padding: 0.8em 1.5em;
    border-radius: 15px;
    font-weight: bold;
    font-size: 1.2em;
    box-shadow: 0 0 10px gold;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.4s ease;
    cursor: pointer;
  }
  #botaoAvancar.mostrar {
    opacity: 1;
    pointer-events: auto;
  }

  /* Tela 3 - imagem-capa com texto no topo */
  #tela3 {
    background: url('imagem-capa.jpg') no-repeat center center;
    background-size: cover;
    cursor: pointer;
    font-size: 1.8em;
    color: gold;
    flex-direction: column;
    justify-content: flex-start;
    padding: 2em 1em 1em;
    user-select: none;
    text-shadow: 0 0 10px black;
  }
  #tela3 span {
    font-weight: bold;
    text-align: center;
    width: 100%;
    margin-bottom: 0;
    font-size: 2.4em;
  }

  /* Tela 4 - v√≠deo fullscreen */
  #tela4 {
    background: black;
    justify-content: center;
    align-items: center;
  }
  video {
    width: 100vw;
    height: 100vh;
    object-fit: cover;
    background: black;
  }
</style>
</head>
<body>

  <!-- Tela 1 -->
  <div class="tela" id="tela1" role="button" tabindex="0" aria-label="Toque para abrir o pergaminho">
    <span>TOQUE PARA ABRIR...</span>
  </div>

  <!-- Tela 2 -->
  <div class="tela oculto" id="tela2" aria-label="Pergaminho aberto com convite">
    <div id="textoConvite" tabindex="0" aria-live="polite" aria-atomic="true">
      <p><em>‚ÄúAntes que eu nascesse‚Ä¶ o C√©u j√° sabia quem caminharia comigo.‚Äù</em></p>
      <p>Em sil√™ncio eterno, Deus j√° escrevia meu nome‚Ä¶ e o seu, lado a lado.</p>
      <p>Por isso, <strong>se este convite chegou at√© voc√™</strong>, n√£o pense que foi acaso ‚Äî foi prop√≥sito.</p>
      <p>Uma <strong>Intima√ß√£o Celestial</strong> foi emitida... n√£o como obriga√ß√£o, mas como honra.</p>
      <p>Porque voc√™ n√£o √© apenas mais um nome na lista‚Ä¶ <strong>Voc√™ √© mem√≥ria viva.</strong></p>
      <p>√â hist√≥ria que pulsa.<br>√â parte da promessa.</p>
      <p><strong>Voc√™ √© um vers√≠culo no cap√≠tulo mais belo da minha jornada.</strong></p>
      <p>üìå Sua presen√ßa n√£o √© apenas esperada‚Ä¶ <strong>ela √© celebrada.</strong></p>
      <p>De todas as escolhas que o C√©u poderia fazer‚Ä¶ Ele escolheu voc√™ para estar aqui.</p>
      <p><em>Ent√£o venha! Traga seu riso, sua lembran√ßa, sua f√©. Traga quem voc√™ √© ‚Äî porque √© assim, exatamente assim, que voc√™ faz parte da minha hist√≥ria.</em></p>
      <p><em>‚Äî Aghatta, filha sonhada e separada pelo Pai üëë‚ú®</em></p>
    </div>
    <button id="botaoAvancar" aria-label="Avan√ßar para a pr√≥xima etapa">Avan√ßar</button>
  </div>

  <!-- Tela 3 -->
  <div class="tela oculto" id="tela3" role="button" tabindex="0" aria-label="Clique para ouvir o som e continuar">
    <span>Os c√©us bate √† porta. Toque para abrir</span>
    <audio id="audioToctoc" src="toctoc.mp3" loop preload="auto"></audio>
  </div>

  <!-- Tela 4 -->
  <div class="tela oculto" id="tela4" aria-label="Mensagem em v√≠deo">
    <video id="videoMensagem" muted playsinline preload="auto">
      <source src="mensagem.mp4" type="video/mp4" />
      Seu navegador n√£o suporta o v√≠deo.
    </video>
  </div>

<script>
  const tela1 = document.getElementById('tela1');
  const tela2 = document.getElementById('tela2');
  const tela3 = document.getElementById('tela3');
  const tela4 = document.getElementById('tela4');
  const textoConvite = document.getElementById('textoConvite');
  const botaoAvancar = document.getElementById('botaoAvancar');
  const audioToctoc = document.getElementById('audioToctoc');
  const videoMensagem = document.getElementById('videoMensagem');

  function mostrarTela(esconder, mostrar) {
    esconder.classList.add('oculto');
    mostrar.classList.remove('oculto');
  }

  // Tela 1 abre pergaminho
  tela1.addEventListener('click', () => mostrarTela(tela1, tela2));
  tela1.addEventListener('keydown', e => {
    if(e.key === 'Enter' || e.key === ' ') {
      e.preventDefault();
      mostrarTela(tela1, tela2);
    }
  });

  // Tela 2: bot√£o aparecer no fim do scroll
  textoConvite.addEventListener('scroll', () => {
    if(textoConvite.scrollTop + textoConvite.clientHeight >= textoConvite.scrollHeight - 5) {
      botaoAvancar.classList.add('mostrar');
    }
  });

  // Tela 2: ao tocar no texto, iniciar √°udio toctoc (do loop da pr√≥xima tela)
  textoConvite.addEventListener('click', () => {
    if(audioToctoc.paused) {
      audioToctoc.play().catch(() => {});
    }
  });

  // Bot√£o avan√ßar da tela 2 para tela 3
  botaoAvancar.addEventListener('click', () => mostrarTela(tela2, tela3));

  // Tela 3: clique para tocar √°udio em loop (se n√£o tocou ainda),
  // se j√° tocou, pausa √°udio e avan√ßa para tela 4 e v√≠deo
  let tocouAudio = false;

  function iniciarAudioToctoc() {
    audioToctoc.play().catch(() => {});
  }

  tela3.addEventListener('click', () => {
    if (!tocouAudio) {
      iniciarAudioToctoc();
      tocouAudio = true;
    } else {
      audioToctoc.pause();
      mostrarTela(tela3, tela4);
      videoMensagem.play().catch(() => {});
    }
  });
  tela3.addEventListener('keydown', e => {
    if(e.key === 'Enter' || e.key === ' ') {
      e.preventDefault();
      if (!tocouAudio) {
        iniciarAudioToctoc();
        tocouAudio = true;
      } else {
        audioToctoc.pause();
        mostrarTela(tela3, tela4);
        videoMensagem.play().catch(() => {});
      }
    }
  });

  // Ao mostrar tela 3, iniciar o √°udio (para o loop aguardar o toque)
  const observer = new MutationObserver(mutations => {
    mutations.forEach(mutation => {
      if (mutation.target === tela3 && !tela3.classList.contains('oculto')) {
        // N√£o tocar autom√°tico, aguarda toque
        // iniciarAudioToctoc();
      }
    });
  });
  observer.observe(tela3, { attributes: true, attributeFilter: ['class'] });

  // Tela 4: ao fim do v√≠deo, redireciona para segunda-experiencia.html
  videoMensagem.addEventListener('ended', () => {
    window.location.href = 'segunda-experiencia.html';
  });
</script>

</body>
</html>
